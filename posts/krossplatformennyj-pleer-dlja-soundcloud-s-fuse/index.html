<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Игорь Фокусов">
    <meta name="description" content="Услуги профессионального программиста 1с в Череповце. тел. &#43;7 921 548-69-50">
    <meta name="keywords" content="1с предприятие, услуги 1с, программист 1с, 1с8, 1с83, сопровождение 1с, поддержка 1с, программист череповец, 1с программист, 1с программист череповец, стоимость услуг 1с, специалист 1с, программист 1с удаленно">

    <base href="https://fokusov.com/">
    <title>
  Создание кроссплатформенного плеера для SoundCloud® с Fuse · Фокусов Игорь
</title>

    <link rel="canonical" href="https://fokusov.com/posts/krossplatformennyj-pleer-dlja-soundcloud-s-fuse/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://fokusov.com/css/coder.min.578f8fce262e4c448c239b69661084c57507b89d51b8d04de15cd1d8f8135600.css" integrity="sha256-V4&#43;PziYuTESMI5tpZhCExXUHuJ1RuNBN4VzR2PgTVgA=" media="screen">
    

    

    

    <link rel="icon" type="image/png" href="https://fokusov.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://fokusov.com/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://fokusov.com/">
      Фокусов Игорь
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/about/">Обо мне</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/projects/">1С</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/android/">Android</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/contacts/">Контакты</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/posts/">Блог</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <h1 class="title">Создание кроссплатформенного плеера для SoundCloud® с Fuse</h1>
        <h2 class="date">January 30, 2017</h2>
      </header>

      <div>
        

<p><img src="img/x09990b693e.jpg.pagespeed.ic.ubHmP0mjiw.jpg" alt="Разработка: Безопасность: Кроссплатформенный плеер для SoundCloud® с Fuse" /></p>

<p>Мы по­сто­ян­но по­лу­ча­ем за­про­сы от на­ших поль­зо­ва­те­лей, ко­то­рые хо­тят уви­деть, как вы­гля­дят &ldquo;ре­аль­ные про­грам­мы&rdquo;, сде­лан­ные с <a href="https://tehnojam.pro/tag/fuse/">Fuse</a>. <a href="https://www.fusetools.com/docs/tutorial/tutorial">Наш учеб­ник</a> спе­ци­аль­но пред­на­зна­чен для быст­ро­го на­ча­ла ра­бо­ты с Fuse, но при этом он по­ка не со­дер­жит опи­са­ний слож­ных за­дач.</p>

<p>По­это­му я ре­шил сде­лать пол­ную про­грам­му, с пуб­ли­ка­ци­ей в ма­га­зи­ны при­ло­же­ний. Она бу­дет слу­жить при­ме­ром по-на­сто­я­ще­му слож­ных за­дач и бу­дет ве­ли­ко­леп­ным ма­стер-клас­сом.</p>

<p>При­ло­же­ние бу­дет ра­бо­тать с ре­аль­ным бе­кен­дом, оно бу­дет крос­сплат­фор­мен­ным (ра­бо­тать в <a href="https://tehnojam.pro/tag/android/">Android</a> и <a href="https://tehnojam.pro/tag/ios/">iOS</a>) и бу­дет ис­поль­зо­вать несколь­ко ин­те­рес­ных на­тив­ных ин­те­гра­ций на обе­их плат­фор­мах.</p>

<p>Как мы ви­дим, <a href="https://developers.soundcloud.com/">SoundCloud®</a> име­ет всё необ­хо­ди­мое:</p>

<ul>
<li>Они предо­став­ля­ют REST API (и он бес­пла­тен)</li>
<li>Есть мно­го кон­тен­та для ра­бо­ты (кар­тин­ки и му­зы­ка)</li>
<li>На­ше­му при­ло­же­нию по­на­до­бят­ся на­тив­ные ком­по­нен­ты (кон­тро­лы для управ­ле­ния му­зы­кой и т.п.)</li>
</ul>

<h4 id="пе-ред-тем-как-на-чать">Пе­ред тем, как на­чать&hellip;</h4>

<p>Вы мо­же­те не уста­нав­ли­вать Fuse и не <a href="https://github.com/fusetools/FuseCloud">чи­тать код на Github</a>, что­бы уви­деть го­то­вый ре­зуль­тат. При­ло­же­ние FuseCloud <strong>мож­но ска­чать</strong> в <a href="https://itunes.apple.com/us/app/fusecloud/id1173516856?mt=8">Apple App Store</a> и <a href="https://play.google.com/store/apps/details?id=com.fuse.fusecloud&amp;hl=en">Google Play</a>.</p>

<blockquote>
<p>Вни­ма­ние: при­ло­же­ние FuseCloud это <strong>неофи­ци­аль­ный пле­ер для SoundCloud</strong>, и <strong>ни­ка­ким об­ра­зом не свя­за­но с SoundCloud</strong>. Оно про­сто ис­поль­зу­ет <a href="https://developers.soundcloud.com/docs/api/guide">SoundCloud API</a>.</p>
</blockquote>

<h4 id="ре-а-ли-за-ция">Ре­а­ли­за­ция</h4>

<p>Есть три глав­ных под­за­да­чи: поль­зо­ва­тель­ский ин­тер­фейс, на­пи­сан­ный на UX и JavaScript; обёрт­ка во­круг SoundCloud REST API; на­тив­ный му­зы­каль­ный пле­ер.</p>

<h5 id="на-ви-га-ция">На­ви­га­ция</h5>

<p>Я ис­поль­зо­вал ком­по­нен­ты <strong>Router</strong> и <strong>Navigator</strong> для по­стро­е­ния боль­шей ча­сти на­ви­га­ции, с един­ствен­ным ис­клю­че­ни­ем для <strong>PageControl</strong> в глав­ном пред­став­ле­нии, в ко­то­ром вы мо­же­те пе­ре­клю­чать­ся меж­ду тре­мя та­ба­ми (лен­та но­во­стей, по­иск, из­бран­ное). По­сле со­зда­ния каж­дой стра­ни­цы при­ло­же­ния от­дель­ным ком­по­нен­том, на­ви­га­ция бу­дет при­мер­но та­кой:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudnavigationstructure.ux
&lt;Navigator DefaultTemplate=&#34;main&#34;&gt;

    &lt;FuseCloud.MainPage ux:Name=&#34;main&#34;&gt;
        &lt;PageControl ux:Name=&#34;pageControl&#34; Active=&#34;searchPage&#34;&gt;
            &lt;Page ux:Name=&#34;newsFeedPage&#34; /&gt;
            &lt;Page ux:Name=&#34;searchPage&#34; /&gt;
            &lt;Page ux:Name=&#34;favoritesPage&#34; /&gt;
        &lt;/PageControl&gt;
    &lt;/FuseCloud.MainPage&gt;

    &lt;FuseCloud.CommentsPage ux:Template=&#34;comments&#34; router=&#34;router&#34; /&gt;

    &lt;FuseCloud.TrackDetailsPage ux:Name=&#34;track&#34; router=&#34;router&#34;/&gt;

&lt;/Navigator&gt;</pre></div>
<h5 id="бес-ко-неч-ная-про-крут-ка">Бес­ко­неч­ная про­крут­ка</h5>

<p>Бла­го­да­ря но­вым воз­мож­но­стям Fuse, я лег­ко со­здал плав­ную бес­ко­неч­ную про­крут­ку для отоб­ра­же­ния всех ком­мен­та­ри­ев к каж­дой ком­по­зи­ции. Встав­ляя от­дель­ные ком­мен­та­рии в блок Deferred, я за­щи­щён от глю­ков при ав­то­ма­ти­че­ской под­груз­ке но­вых эле­мен­тов. Ни­же вы мо­же­те уви­деть при­мер UX-ко­да для со­зда­ния та­кой про­крут­ки:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudendlessscroller.ux
&lt;ScrollView ClipToBounds=&#34;False&#34;&gt;
    &lt;StackPanel&gt;
        &lt;Each Items=&#34;{comments}&#34;&gt;
            &lt;Deferred&gt;
                &lt;FuseCloud.DividerLine Alignment=&#34;Top&#34;/&gt;
                &lt;FuseCloud.Comment ux:Name=&#34;comment&#34; ThumbnailUrl=&#34;{avatar_url}&#34; Username=&#34;{username}&#34; Body=&#34;{body}&#34; /&gt;
            &lt;/Deferred&gt;
        &lt;/Each&gt;
    &lt;/StackPanel&gt;
    &lt;Scrolled To=&#34;End&#34; Within=&#34;100&#34;&gt;
        &lt;Callback Handler=&#34;{showMoreComments}&#34; /&gt;
    &lt;/Scrolled&gt;
&lt;/ScrollView&gt;</pre></div>
<p>Про­крут­ка на 100 то­чек от ниж­не­го края при­ло­же­ния вы­зы­ва­ет JavaScript-функ­цию, ко­то­рая под­гру­жа­ет сле­ду­ю­щие ком­мен­та­рии:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudendlessscroller.js
function showMoreComments() {
    if (nCommentsShowing &lt; allComments.length) {
        nCommentsShowing += nCommentsPerPage;
        while (comments.length &lt; nCommentsShowing &amp;&amp; comments.length &lt; allComments.length - 1) {
            comments.add(allComments.getAt(comments.length));
        }
    }
}</pre></div>
<h5 id="за-мут-не-ние-фо-на">За­мут­не­ние фо­на</h5>

<p>Экран про­иг­ры­ва­те­ля по­ка­зы­ва­ет изоб­ра­же­ние аль­бо­ма те­ку­щей до­рож­ки по­се­ре­дине стра­ни­цы, при этом за­пол­няя весь фон за­тем­нён­ной ко­пи­ей это­го же изоб­ра­же­ния. В Fuse та­кое де­ла­ет­ся од­ной строч­кой ко­да: <strong><Blur /></strong>, но за­мут­не­ние боль­ших эле­мен­тов мо­жет пло­хо от­ра­зить­ся на про­из­во­ди­тель­но­сти. По­это­му я ис­поль­зую клас­си­че­ский трюк с про­грамм­ной GPU-об­ра­бот­кой для улуч­ше­ния ско­ро­сти:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudscaledblur.ux
&lt;FuseCloud.AlbumArt Width=&#34;20%&#34; Height=&#34;20%&#34;&gt;
    &lt;Blur Radius=&#34;2&#34;/&gt;
    &lt;Scaling Factor=&#34;5&#34; /&gt;
&lt;/FuseCloud.AlbumArt&gt;</pre></div>
<p>Здесь я умень­шаю раз­мер изоб­ра­же­ния до 20% от ори­ги­наль­но­го и за­мут­няю умень­шен­ное изоб­ра­же­ние, за­тем уве­ли­чи­ваю по­лу­чив­ше­е­ся изоб­ра­же­ние до нор­маль­но­го раз­ме­ра.</p>

<p><img src="img/x787658ba2f.jpg.pagespeed.ic.Lr221KUpFB.jpg" alt="Разработка: Кроссплатформенный плеер для SoundCloud® с Fuse" /></p>

<h5 id="ра-бо-та-ем-с-soundcloud-api">Ра­бо­та­ем с SoundCloud API</h5>

<p>Во­об­ще это неслож­ная за­да­ча и в ней нет ни­ка­ких спе­ци­фич­ных для Fuse тех­ник. Я струк­ту­ри­ро­вал обёрт­ку, по­это­му каж­дый за­прос воз­вра­ща­ет promise. Мо­дель при­ло­же­ния бы­ла ис­поль­зо­ва­на как ин­тер­фейс к API че­рез на­бор функ­ций-гет­те­ров, воз­вра­щав­ших promise-ы в Observable. Код ни­же на­гляд­но ил­лю­стри­ру­ет этот под­ход:</p>

<p>Функ­ция, ис­поль­зу­е­мая для по­лу­че­ния ста­ту­са лай­ка для тре­ка, воз­вра­ща­ет promise:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudislikingtrackfetch.js
function isLikingTrack(trackId) {
    return Auth.getAccessToken()
        .then(function(token) {
            return FuseCloudGet(&#34;me/favorites/&#34; + trackId, {}, token);
        });
}</pre></div>
<p>Мо­дель пре­вра­ща­ет этот promise в observable, ис­поль­зуя удоб­ную функ­цию (<strong>DelayedObservable</strong>):</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudislikingtrackobservable.js
function GetIsLikingTrack(trackId) {
    return DelayedObservable(function(obs) {
        FuseCloud.isLikingTrack(trackId)
            .then(function(result) {
                obs.add(result);
            });
    });
}</pre></div>
<p>Это ре­аль­но удоб­но, учи­ты­вая что воз­вра­щён­ный observable бу­дет за­пол­нен сра­зу при по­лу­че­нии дан­ных. За­тем мы мо­жем сде­лать при­вяз­ку к нему и не бес­по­ко­ить­ся об об­рат­ных вы­зо­вах или об­нов­ле­ни­ях ин­тер­фей­са при­ло­же­ния.</p>

<p>Функ­ция DelayedObservable ра­бо­та­ет как мост меж­ду API, ос­но­ван­ной на promise-ах, и API, ос­но­ван­ной на Observable:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fuseclouddelayedobservable.js
function DelayedObservable(getter) {
    var ret = Observable();
    getter(ret);
    return ret;
}</pre></div>
<p>Эта функ­ция от­ве­ча­ет за об­нов­ле­ние Observable при за­груз­ке дан­ных.</p>

<h4 id="oauth-2-0">OAuth 2.0</h4>

<p>SoundCloud API поз­во­ля­ет ав­то­ри­зо­вать­ся с по­мо­щью про­то­ко­ла OAuth 2.0. Ис­поль­зуя мо­дуль InterApp, я лег­ко пе­ре­ки­ды­ваю поль­зо­ва­те­ля на ав­то­ри­за­цию с по­мо­щью на­тив­но­го бра­у­зе­ра:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudlaunchuri.js
var uri = &#34;https://soundcloud.com/connect?client_id=&#34; + clientId
        + &#34;&amp;display=popup&#34;
        + &#34;&amp;response_type=code&#34;
        + &#34;&amp;redirect_uri=fuse-soundcloud://fuse&#34;;
InterApp.launchUri(uri);</pre></div>
<p>В URL вы­ше пе­ре­да­ёт­ся URI об­рат­но­го вы­зо­ва, ко­то­рый SoundCloud ис­поль­зу­ет для воз­вра­та то­ке­на. Fuse поз­во­ля­ет за­ре­ги­стри­ро­вать свою URI-схе­му в фай­ле про­ек­та:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">// fusecloudcustomurischeme.json
&#34;Mobile&#34;:{
    &#34;UriScheme&#34;: &#34;fuse-soundcloud&#34;
}</pre></div>
<p>Та­ким об­ра­зом, SoundCloud API ав­то­ма­ти­че­ски вер­нёт­ся в на­шу про­грам­му, как толь­ко то­кен до­сту­па бу­дет го­тов.</p>

<h4 id="со-зда-ние-крос-сплат-фор-мен-но-го-аудио-пле-е-ра">Со­зда­ние крос­сплат­фор­мен­но­го аудио­пле­е­ра</h4>

<p>Ре­а­ли­за­ция обёрт­ки для на­тив­ных пле­е­ров бы­ла наи­бо­лее ин­те­рес­ной ча­стью про­цес­са. Ча­стич­но из-за то­го, что API для это­го раз­лич­ны у Android и iOS, но та­к­же по при­чине мо­но­лит­ной при­ро­ды ме­диа-пле­е­ров. Я на­чал с ми­ни­маль­но­го на­бо­ра тре­бо­ва­ний.</p>

<p>Наш <strong>StreamingPlayer</strong> дол­жен:</p>

<ul>
<li>Транс­ли­ро­вать аудио по URL</li>
<li>Про­дол­жать иг­рать, ко­гда при­ло­же­ние ухо­дит в фон</li>
<li>Поз­во­лять пе­ре­клю­чать­ся меж­ду тре­ка­ми, по­ка при­ло­же­ние на­хо­дит­ся в фоне (ис­поль­зуя на­тив­ные кон­тро­лы на экране бло­ки­ров­ки)</li>
<li>Отоб­ра­жать об­лож­ку аль­бо­ма на экране бло­ки­ров­ки<br />
<img src="img/x93822d6554.jpg.pagespeed.ic.MDYPBFDT0-.jpg" alt="Разработка: Кроссплатформенный плеер для SoundCloud® с Fuse" /></li>
</ul>

<p>На бу­ма­ге это не ка­жет­ся слиш­ком слож­ной за­да­чей, но на де­ле она ока­за­лась на­сто­я­щим вы­зо­вом.</p>

<p>Пре­жде все­го, под­клю­че­ние к на­тив­но­му аудио­пле­е­ру для про­иг­ры­ва­ния URL бы­ло су­пер­про­стым. API у Android MediaPlayer-а и AVPlayer у iOS пред­ла­га­ют это пря­мо из ко­роб­ки. Мо­ей на­чаль­ной за­дум­кой бы­ло ис­поль­зо­вать ми­ни­маль­ную обёрт­ку во­круг обо­их этих API и про­сто де­лать осталь­ную ра­бо­ту (ти­па управ­ле­ния плей­ли­ста­ми и со­сто­я­ни­ем) в JavaScript. Но огра­ни­че­ние на фо­но­вое вы­пол­не­ние JS на этих плат­фор­мах по­ста­ви­ло крест на этом (од­но из на­ших тре­бо­ва­ний &mdash; воз­мож­ность ис­поль­зо­вать кон­тро­лы на экране бло­ки­ров­ки).</p>

<p>Это озна­ча­ло, что я дол­жен ре­а­ли­зо­вать ра­бо­ту с плей­ли­ста­ми в на­тив­ном ко­де, при этом учи­ты­вая осо­бен­но­сти Android и iOS. К сча­стью, всё ока­за­лось го­раз­до про­ще, так как <a href="https://www.fusetools.com/docs/native-interop/foreign-code">воз­мож­но­сти внеш­не­го ко­да Fuse</a> поз­во­ля­ют вам лег­ко ин­те­гри­ро­вать код на Java и Objective-C в про­ек­ты Fuse. Это очень удоб­но!</p>

<p>Дру­гой ин­те­рес­ной за­да­чей бы­ло по­лу­че­ние те­ку­ще­го со­сто­я­ния пле­е­ра для обо­их ком­по­нен­тов, MediaPlayer и AVPlayer. Оба этих API име­ют раз­ные мо­де­ли со­сто­я­ния и раз­ные пу­ти управ­ле­ния ими, но я на­шёл уни­вер­саль­ный спо­соб.</p>

<p>И, на­ко­нец, ра­бо­та с экра­ном бло­ки­ров­ки. В iOS это крайне про­сто; до­ста­точ­но за­ре­ги­стри­ро­вать несколь­ко си­стем­ных вы­зо­вов. В Android же это не та­кая про­стая за­да­ча. В API, на­чи­ная с уров­ня 21, Android мо­жет по­лу­чать ме­диа-но­ти­фи­ка­ции, ко­то­рые за­ме­ща­ют обыч­ные кон­тро­лы на экране бло­ки­ров­ки. Но нуж­но ко­пать в сто­ро­ну си­сте­мы intent-ов для на­строй­ки ком­му­ни­ка­ции меж­ду но­ти­фи­ка­ци­я­ми и фо­но­вой служ­бой.</p>

<h4 id="воз-мож-но-сти">Воз­мож­но­сти</h4>

<p>В при­ло­же­ние FuseCloud встро­е­ны очень боль­шие воз­мож­но­сти и ме­ха­низ­мы, и так как я люб­лю пе­ре­чис­ле­ния, вот неболь­шой спи­сок фич, за­ло­жен­ных в этой про­грам­ме (и ис­ход­ном ко­де):</p>

<ul>
<li>Аутен­ти­фи­ка­ция в SoundCloud® по про­то­ко­лу OAuth 2.0</li>
<li>Ис­поль­зо­ва­ние па­ке­та InterApp для за­пус­ка url во внеш­нем бра­у­зе­ре и пе­ре­да­ча от­кли­ка по URI</li>
<li>Ав­то­ма­ти­че­ское об­нов­ле­ние некор­рект­ных то­ке­нов</li>
<li>По­лу­че­ние дан­ных по REST API</li>
<li>Лен­та но­во­стей, по­иск тре­ков, из­бран­ное</li>
<li>Воз­мож­ность по­ста­вить лайк и диз­лайк тре­ку</li>
<li>Об­лож­ки тре­ков</li>
<li>Отоб­ра­же­ние ком­мен­та­ри­ев к тре­ку</li>
<li>Раз­ме­ще­ние ком­мен­та­ри­ев</li>
<li>Ста­ти­сти­ка поль­зо­ва­те­ля</li>
<li>Сма­хи­ва­ние вле­во/впра­во для пе­ре­клю­че­ния до­рож­ки</li>
<li>По­тя­ги­ва­ние экра­на для об­нов­ле­ния</li>
<li>Бес­ко­неч­ный спи­сок про­крут­ки</li>
<li>Сма­хи­ва­ние для по­ка­за дей­ствий с эле­мен­том (диз­лайк в из­бран­ном)</li>
<li>Со­хра­не­ние со­сто­я­ния UI с ис­поль­зо­ва­ни­ем Storage API (при­вет­ствен­ная ин­фор­ма­ция по­ка­зы­ва­ет­ся толь­ко один раз при на­ча­ле ра­бо­ты с про­грам­мой)®</li>
<li>HTTP Audio StreamingPlayer для iOS и Android</li>
<li>Транс­ля­ция му­зы­ки из SoundCloud®</li>
<li>На­стра­и­ва­е­мая па­нель пе­ре­мот­ки</li>
<li>Фо­но­вое про­иг­ры­ва­ние</li>
<li>Кон­тро­лы на экране бло­ки­ров­ки в iOS и Android</li>
<li>iOS: сле­ду­ю­щий, преды­ду­щий, иг­рать/па­у­за, пе­ре­мот­ка на экране бло­ки­ров­ки</li>
<li>Об­лож­ка аль­бо­ма на экране бло­ки­ров­ки</li>
<li>Но­ти­фи­ка­ции в Android: сле­ду­ю­щий, преды­ду­щий, иг­рать/па­у­за</li>
<li>По­каз об­лож­ки аль­бо­ма в но­ти­фи­ка­ции и в фоне</li>
<li>Плей­ли­сты</li>
<li>Ав­то­про­иг­ры­ва­ние сле­ду­ю­ще­го при окон­ча­нии тре­ка</li>
</ul>

<h4 id="вы-во-ды-и-за-груз-ки">Вы­во­ды и за­груз­ки</h4>

<p>Бы­ло ре­аль­но класс­но ра­бо­тать над этим про­ек­том. Я необъ­ек­ти­вен, но Fuse ре­аль­но впе­чат­ли­ла ме­ня  &mdash; в ко­то­рый раз.</p>

<p>И <a href="https://www.fusetools.com/docs/native-interop/foreign-code">ме­ха­низ­мы внеш­не­го ко­да</a> Fuse ока­за­лись дей­стви­тель­но хо­ро­шим спо­со­бом со­зда­ния на­тив­ных ком­по­нен­тов. Они поз­во­ля­ют ис­поль­зо­вать до­ку­мен­та­цию к API каж­дой плат­фор­мы на сво­ём язы­ке, где это воз­мож­но, и без обёр­ток на JavaScript.</p>

<p>Вы мо­же­те ска­чать при­ло­же­ние <strong>FuseCloud</strong> для Android и iOS в <a href="https://itunes.apple.com/us/app/fusecloud/id1173516856?mt=8">Apple App Store</a>, в <a href="https://play.google.com/store/apps/details?id=com.fuse.fusecloud&amp;hl=en">Google Play</a>, и <a href="https://github.com/fusetools/FuseCloud">ис­ход­ный код на Github</a>.</p>

<blockquote>
<p>Вни­ма­ние: ещё раз о со­зда­нии &ldquo;ре­аль­ной&rdquo; про­грам­мы (с на­тив­ны­ми ком­по­нен­та­ми и ин­те­гра­ци­я­ми с бе­кен­дом) &mdash; вы по­чти на­вер­ня­ка столк­не­тесь с неко­то­ры­ми труд­но­стя­ми. Мы по­сто­ян­но улуч­ша­ем на­шу до­ку­мен­та­цию, но ес­ли всё-та­ки встре­ти­те та­кой слу­чай, <a href="https://www.fusetools.com/community">дай­те знать об этом нам и со­об­ще­ству</a>, и мы с ра­до­стью вам по­мо­жем :)<br />
<br />
<strong>Узнать боль­ше о Fuse</strong> мож­но по­смот­рев <a href="http://fusetools.com/examples">по­сто­ян­но рас­ту­щий спи­сок при­ме­ров</a> (с ис­ход­ным ко­дом, ко­неч­но), <a href="http://fusetools.com/community">всту­пай­те в на­ше со­об­ще­ство</a> (у нас есть класс­ный фо­рум и груп­па в Slack) или под­пи­сы­вай­тесь на нас в <a href="https://twitter.com/fusetools">Twitter</a> или <a href="https://facebook.com/fusetools">Facebook</a>.</p>
</blockquote>

<p>Ав­тор ори­ги­на­ла <a href="https://blog.prototypr.io/i-made-a-cross-platform-soundcloud-player-with-fuse-9fb1e62b7db1#.uelvgeooc">Kristian Hasselknippe, Software Engineer at Fuse</a></p>

      </div>

      <footer>
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "fokusovcom" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$']],
        displayMath: [['$$','$$']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { extensions: ["AMSmath.js", "AMSsymbols.js"] }
      }
    });
    MathJax.Hub.Queue(function() {
      
      
      
      var all = MathJax.Hub.getAllJax(), i;
      for(i = 0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
     © 2018    ·  Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>. 
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-54274841-9', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>

<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Игорь Фокусов">
    <meta name="description" content="Услуги профессионального программиста 1с в Череповце. тел. &#43;7 921 548-69-50">
    <meta name="keywords" content="1с предприятие, услуги 1с, программист 1с, 1с8, 1с83, сопровождение 1с, поддержка 1с, программист череповец, 1с программист, 1с программист череповец, стоимость услуг 1с, специалист 1с, программист 1с удаленно">

    <base href="https://fokusov.com/">
    <title>
  Как отправлять СМС и звонить с Angular NativeScript · Фокусов Игорь
</title>

    <link rel="canonical" href="https://fokusov.com/posts/kak-otpravljat-sms-i-zvonit-s-angular-nativescript/">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather:300,700|Source+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://fokusov.com/css/coder.min.578f8fce262e4c448c239b69661084c57507b89d51b8d04de15cd1d8f8135600.css" integrity="sha256-V4&#43;PziYuTESMI5tpZhCExXUHuJ1RuNBN4VzR2PgTVgA=" media="screen">
    

    

    

    <link rel="icon" type="image/png" href="https://fokusov.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://fokusov.com/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.49" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://fokusov.com/">
      Фокусов Игорь
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/about/">Обо мне</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/projects/">1С</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/android/">Android</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/contacts/">Контакты</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://fokusov.com/posts/">Блог</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <h1 class="title">Как отправлять СМС и звонить с Angular NativeScript</h1>
        <h2 class="date">March 25, 2017</h2>
      </header>

      <div>
        <p><img src="data:image/png;base64,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" alt="Разработка: Как отправлять СМС и звонить с Angular NativeScript" /></p>

<p>От­прав­лять СМС из при­ло­же­ния NativeScript очень про­сто! И се­год­ня я по­ка­жу вам как это сде­лать.</p>

<p>Ис­ход­ный код мож­но ска­чать <a href="https://github.com/PWHSoftware/NativeScript_SMS_Phone">здесь</a>.</p>

<p>Убе­ди­тесь, что у вас уста­нов­лен NodeJS и NativeScript CLI.</p>

<p>Вна­ча­ле со­зда­дим пу­стой про­ект Angular NativeScript:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">tns create HelloWorld --template nativescript-template-ng-tutorial</pre></div>
<p>Эта ко­ман­да со­здаст про­ект smsApp. Пе­рей­ди­те в со­здан­ную ди­рек­то­рию про­ек­та и уста­но­ви­те пла­гин nativescript-phone:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">tns plugin add nativescript-phone</pre></div>
<p>Им­пор­ти­ру­ем этот мо­дуль в фай­ле app.​com​pone​nt.​ts:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">import * as phone from &#39;nativescript-phone&#39;;</pre></div>
<p>Для ис­поль­зо­ва­ния ngModel в на­шем про­ек­те, нуж­но до­ба­вить NativeScriptFormsModule в файл app.​module.​ts:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">import {NativeScriptFormsModule} from &#34;nativescript-angular/forms&#34;

@NgModule({
  declarations: [AppComponent],
  bootstrap: [AppComponent],
  imports: [NativeScriptModule, NativeScriptFormsModule],
  schemas: [NO_ERRORS_SCHEMA],
})</pre></div>
<p>До­ба­вим сти­ли в app.​css для кно­пок:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">@import &#34;nativescript-theme-core/css/sky.css&#34;;

.phone-button {
    background-color:#2ecc71;
    color:white;
}

.text-button {
    background-color:#3498db;
    color:white;
}</pre></div>
<p>Те­перь нуж­но раз­ра­бо­тать ин­тер­фейс. Для про­сто­ты опи­шем его в шаб­лоне в фай­ле app.​com​pone​nt.​ts</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">@Component({
  selector: &#34;my-app&#34;,
  template: `
    &lt;ActionBar class=&#34;action-bar&#34; title=&#34;NativeScript SMS Application&#34;&gt;&lt;/ActionBar&gt;
    &lt;StackLayout class=&#34;p-20&#34;&gt;

      &lt;Label text=&#34;Select either TEXT or PHONE to continue.&#34;&gt;&lt;/Label&gt;

      &lt;FlexboxLayout&gt;
        &lt;Button class=&#34;phone-button&#34; (tap)=&#34;setPhoneType(0)&#34; text=&#34;PHONE&#34;&gt;&lt;/Button&gt;
        &lt;Button class=&#34;text-button&#34;(tap)=&#34;setPhoneType(1)&#34; text=&#34;Text&#34;&gt;&lt;/Button&gt;
      &lt;/FlexboxLayout&gt;

      &lt;StackLayout *ngIf=&#34;phoneType === 0&#34;&gt;
        &lt;TextField keyboardType=&#34;phone&#34; hint=&#34;Enter Phone Number...&#34; [(ngModel)]=&#34;phoneNumber&#34;&gt;&lt;/TextField&gt;
        &lt;Button (tap)=&#34;callNumber()&#34; *ngIf=&#34;phoneNumber&#34; class=&#34;phone-button&#34; [text]=&#34;&#39;Call &#39; + phoneNumber&#34;&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;

      &lt;StackLayout *ngIf=&#34;phoneType === 1&#34;&gt;
        &lt;TextField keyboardType=&#34;phone&#34; hint=&#34;Enter Phone Number...&#34; [(ngModel)]=&#34;phoneNumber&#34;&gt;&lt;/TextField&gt;
        &lt;TextField keyboardType=&#34;text&#34; hint=&#34;Enter Message...&#34; [(ngModel)]=&#34;message&#34;&gt;&lt;/TextField&gt;
        &lt;Button (tap)=&#34;textNumber()&#34; *ngIf=&#34;phoneNumber &amp;&amp; message&#34; class=&#34;text-button&#34; [text]=&#34;&#39;Text &#39; + phoneNumber&#34;&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;

    &lt;/StackLayout&gt;
  `
})</pre></div>
<p>Для на­бо­ра но­ме­ра мы мо­жем ис­поль­зо­вать функ­цию phone.dial(). Мы по­лу­чим этот но­мер че­рез при­вяз­ку к ngModel в шаб­лоне. Вот как вы­гля­дит эта функ­ция:</p>

<p><img src="img/x6e1b9a8cc5.jpg.pagespeed.ic.4319TXPgfu.jpg" alt="Разработка: Как отправлять СМС и звонить с Angular NativeScript" /><br />
До­ста­точ­но про­сто. Нуж­но про­сто пе­ре­дать но­мер стро­кой в ме­тод. Так как мы пе­ре­да­ём но­мер чис­лом с циф­ро­вой кла­ви­а­ту­ры, до­ста­точ­но бу­дет про­сто пре­об­ра­зо­вать его в стро­ку:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">export class AppComponent {
  //Переменные
  phoneNumber: number;
  message: string;

  //Для определения какой выбор сделал пользователь
  phoneType: number;

  //Установим выбор пользователя (смс или звонок)
  setPhoneType(val) {
    this.phoneType = val;
  }

  callNumber() {
    phone.dial(String(this.phoneNumber), true)
  }
}</pre></div>
<p>Для пе­ре­да­чи СМС есть со­от­вет­ству­ю­щий ме­тод:</p>

<p><img src="img/xaaa8d9c912.jpg.pagespeed.ic.eIimPN-OnC.jpg" alt="Разработка: Как отправлять СМС и звонить с Angular NativeScript" /><br />
Ин­те­рес­ное здесь то, что мы мо­жем от­пра­вить со­об­ще­ние мас­си­ву но­ме­ров, по­это­му мы мо­жем со­здать несколь­ко по­лей для вво­да но­ме­ров. Я по­ка пе­ре­дам толь­ко один но­мер ме­то­ду:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">textNumber() {
  /*
    Здесь у нас массив номеров, поэтому легко можем добавить ещё один номер:
    phone.sms([&#39;1234&#39;,&#39;5678&#39;...], message)
  */
  phone.sms([String(this.phoneNumber)], this.message).then((result) =&gt; {
    //Возвращает promise, делайте с ним что хотите
    console.log(result);
  })
}</pre></div>
<p>Вот пол­ный код уро­ка:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">import { Component } from &#34;@angular/core&#34;;
import * as phone from &#39;nativescript-phone&#39;;
@Component({
  selector: &#34;my-app&#34;,
  template: `
    &lt;ActionBar class=&#34;action-bar&#34; title=&#34;NativeScript SMS Application&#34;&gt;&lt;/ActionBar&gt;
    &lt;StackLayout class=&#34;p-20&#34;&gt;

      &lt;Label text=&#34;Select either TEXT or PHONE to continue.&#34;&gt;&lt;/Label&gt;

      &lt;FlexboxLayout&gt;
        &lt;Button class=&#34;phone-button&#34; (tap)=&#34;setPhoneType(0)&#34; text=&#34;PHONE&#34;&gt;&lt;/Button&gt;
        &lt;Button class=&#34;text-button&#34;(tap)=&#34;setPhoneType(1)&#34; text=&#34;Text&#34;&gt;&lt;/Button&gt;
      &lt;/FlexboxLayout&gt;

      &lt;StackLayout *ngIf=&#34;phoneType === 0&#34;&gt;
        &lt;TextField keyboardType=&#34;phone&#34; hint=&#34;Enter Phone Number...&#34; [(ngModel)]=&#34;phoneNumber&#34;&gt;&lt;/TextField&gt;
        &lt;Button (tap)=&#34;callNumber()&#34; *ngIf=&#34;phoneNumber&#34; class=&#34;phone-button&#34; [text]=&#34;&#39;Call &#39; + phoneNumber&#34;&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;

      &lt;StackLayout *ngIf=&#34;phoneType === 1&#34;&gt;
        &lt;TextField keyboardType=&#34;phone&#34; hint=&#34;Enter Phone Number...&#34; [(ngModel)]=&#34;phoneNumber&#34;&gt;&lt;/TextField&gt;
        &lt;TextField keyboardType=&#34;text&#34; hint=&#34;Enter Message...&#34; [(ngModel)]=&#34;message&#34;&gt;&lt;/TextField&gt;
        &lt;Button (tap)=&#34;textNumber()&#34; *ngIf=&#34;phoneNumber &amp;&amp; message&#34; class=&#34;text-button&#34; [text]=&#34;&#39;Text &#39; + phoneNumber&#34;&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;

    &lt;/StackLayout&gt;
  `
})
export class AppComponent {
  //Переменные
  phoneNumber: number;
  message: string;

  //Для определения какой выбор сделал пользователь
  phoneType: number;

  //Установим выбор пользователя (смс или звонок)
  setPhoneType(val) {
    this.phoneType = val;
  }

  callNumber() {
    phone.dial(String(this.phoneNumber), true)
  }

  textNumber() {
    /*
      Здесь у нас массив номеров, поэтому легко можем добавить ещё один номер:
      phone.sms([&#39;1234&#39;,&#39;5678&#39;...], message)
    */
    phone.sms([String(this.phoneNumber)], this.message).then((result) =&gt; {
      //Возвращает promise, делайте с ним что хотите
      console.log(result);
    })
  }
}</pre></div>
<p><img src="img/x08172bae34.png.pagespeed.ic.YfEgjZNdWm.png" alt="Разработка: Как отправлять СМС и звонить с Angular NativeScript" /></p>

<p>Ис­точ­ник: <a href="https://pwhsoftware.com/blog/2017/03/17/how-to-send-an-sms-and-make-phone-calls-with-nativescript">«How to Send an SMS and Make Phone Calls with Angular NativeScript»</a></p>

      </div>

      <footer>
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "fokusovcom" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$']],
        displayMath: [['$$','$$']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: { extensions: ["AMSmath.js", "AMSsymbols.js"] }
      }
    });
    MathJax.Hub.Queue(function() {
      
      
      
      var all = MathJax.Hub.getAllJax(), i;
      for(i = 0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
     © 2018    ·  Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>. 
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-54274841-9', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
